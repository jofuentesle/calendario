---
import Layout from '~/layouts/PageLayout.astro';
import HeroText from '~/components/widgets/HeroText.astro';
import ContactUs from '~/components/widgets/Contact.astro';
import Features2 from '~/components/widgets/Features2.astro';


const metadata = {
  title: 'Calendarios de mesa',
};

const tipoCalendario = 'Calendario de Mesa Espiral'; // Definir la constante

const inputs = [
  {
    type: 'text',
    name: 'nombre',
    label: 'Nombre',
  },
  {
    type: 'email',
    name: 'email',
    label: 'Correo electrónico',
  },
  {
    type: 'tel',
    name: 'phone',
    label: 'Teléfono',
  },
  {
    type: 'select',
    name: 'medida',
    label: 'Medida Calendario',
    options: [
      { value: '21x10', label: 'Rectangular 21x10 cm' },
      { value: '15x15', label: 'Cuadrado 15x15 cm' },
      { value: '21x15', label: 'Dina A5 21x15 cm' },
    ],
  },
  {
    type: 'select',
    name: 'cantidad',
    label: 'Cantidad',
    options: [
      { value: '100', label: '100' },
      { value: '200', label: '200' },
      { value: '500', label: '500' },
      { value: '1000', label: '1000' },
    ],
  },
  
  
];

---

<Layout metadata={metadata}>
  <!-- HeroText Widget ******************* -->
  <HeroText tagline="Solicitud de Precio" title="Calendario de Mesa Espiral" />

  <ContactUs
    
    button="Enviar Solicitud"
    subtitle="Para respuestas rápidas, consulta nuestras preguntas frecuentes. Si no encuentras lo que buscas, estamos encantados de ayudarte."
    inputs={inputs}
      disclaimer={{
        label: 'Al enviar este formulario, aceptas nuestra política de privacidad.',
      }}
  />

  <!-- Features2 Widget ************** -->
  <Features2
    title="Estamos para ayudarte!"
    items={[
      {
        title: 'Atención al cliente',
        description: `Contáctanos para consultas sobre gestión de cuenta, navegación web, problemas de pago o acceso a productos adquiridos.`,
      },
      {
        title: 'Departamento comercial',
        description:
          'Contáctanos para preguntas sobre compras, personalización, licencias comerciales o creación de calendarios personalizados.',
      },
      {
        title: 'Soporte técnico',
        description:
          'Contáctanos si enfrentas problemas técnicos con la personalización, diseño o compatibilidad de calendarios.',
      },
      {
        title: 'Teléfono',
        description: '+34 932 749 890',
        icon: 'tabler:headset',
      },
      {
        title: 'Email',
        description: 'comercial@reproidsseny.com',
        icon: 'tabler:mail',
      },
      {
        title: 'Ubicación',
        description: 'Juan de Mena, nº 19 - 08035 BCN',
        icon: 'tabler:map-pin',
      },
    ]}
  />
</Layout>

<!-- Script para manejar el envío del formulario -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
      const form = document.getElementById('form-contact'); // Verifica que este ID coincida con el del formulario
  
      form?.addEventListener('submit', async (e) => {
        e.preventDefault(); // Evita el comportamiento por defecto de recargar la página
  
        const formData = new FormData(form); // Captura los datos del formulario
        const jsonData = Object.fromEntries(formData.entries()); // Convierte los datos a un formato JSON
  
        try {
          const response = await fetch('/api/send-email', { // Verifica que la URL de tu API es correcta
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(jsonData), // Envía los datos del formulario en formato JSON
          });
  
          const result = await response.json();
  
          if (response.ok && result.success) {
            alert('Formulario enviado con éxito.');
            form.reset(); // Limpia el formulario si el envío fue exitoso
          } else {
            alert('Error al enviar el formulario: ' + (result.error || 'desconocido'));
          }
        } catch (error) {
          console.error('Error en el envío del formulario:', error);
          alert('Error inesperado: ' + error.message);
        }
      });
  });
  </script>
